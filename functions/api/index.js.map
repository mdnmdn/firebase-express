{"version":3,"sources":["../../src/api/index.js"],"names":["db","require","database","console","log","exports","checkInitSurvey","instance","data","ref","once","orginalData","set","list","search","active"],"mappings":";;;;AAAA,MAAMA,KAAKC,QAAQ,aAAR,EAAuBC,QAAlC;;AAEAC,QAAQC,GAAR,CAAYJ,EAAZ;;AAEAK,QAAQC,eAAR;AAAA,iCAA0B,WAAOC,WAAW,SAAlB,EAAgC;AACtD,cAAMC,OAAO,MAAMR,GAAGS,GAAH,CAAQ,SAAQF,QAAS,UAAzB,EAAoCG,IAApC,CAAyC,OAAzC,CAAnB;AACA,YAAI,CAACF,IAAL,EAAU;AACNL,oBAAQC,GAAR,CAAa,iBAAgBG,QAAS,EAAtC;AACA,kBAAMI,cAAc,MAAMX,GAAGS,GAAH,CAAQ,kBAAR,EAA2BC,IAA3B,CAAgC,OAAhC,CAA1B;AACA,kBAAMV,GAAGS,GAAH,CAAQ,SAAQF,QAAS,EAAzB,EAA4BK,GAA5B,CAAgCD,WAAhC,CAAN;AACH;AACJ,KAPD;;AAAA;AAAA;AAAA;AAAA;;AASAN,QAAQQ,IAAR;AAAA,kCAAe,WAAO;AAClBN,gBADkB,EACRO,MADQ,EACAC;AADA,KAAP,EAEL;AACF,cAAMP,OAAO,MAAMR,GAAGS,GAAH,CAAQ,SAAQF,QAAS,UAAzB,EAAoCG,IAApC,CAAyC,OAAzC,CAAnB;AACA,eAAOF,IAAP;AACP,KALD;;AAAA;AAAA;AAAA;AAAA","file":"index.js","sourcesContent":["const db = require('../firebase').database;\n\nconsole.log(db);\n\nexports.checkInitSurvey = async (instance = 'default') => {\n    const data = await db.ref(`/data/${instance}/surveys`).once('value');\n    if (!data){\n        console.log(`creating repo ${instance}`);\n        const orginalData = await db.ref(`/data/__template`).once('value');\n        await db.ref(`/data/${instance}`).set(orginalData)\n    }\n};\n\nexports.list = async ({\n    instance, search, active\n    }) => {\n        const data = await db.ref(`/data/${instance}/surveys`).once('value');\n        return data;\n};\n\n\n"]}